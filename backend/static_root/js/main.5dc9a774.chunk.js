(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{64:function(e,t,a){},91:function(e,t,a){},92:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(16),c=a.n(s),i=(a(63),a(64),a(14)),o=a(6),l=a(13),u=a(21),h=a.n(u),d=a(31),j=a(22),p=a.n(j),b="LOGIN_SUCCES",m="LOGIN_FAIL",O="USER_LOADED_SUCCESS",x="USER_LOADED_FAIL",g="AUTHENTICATED_SUCCESS",f="AUTHENTICATED_FAIL",v="LOGOUT",w=function(){return function(){var e=Object(d.a)(h.a.mark((function e(t){var a,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!localStorage.getItem("access")){e.next=14;break}return a={headers:{"Content-Type":"application/json",Authorization:"JWT ".concat(localStorage.getItem("access")),Accept:"application/json"}},e.prev=2,e.next=5,p.a.get("".concat("http://127.0.0.1:8000","/auth/users/me/"),a);case 5:n=e.sent,t({type:O,payload:n.data}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),t({type:x});case 12:e.next=15;break;case 14:t({type:x});case 15:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}()},_=a(2),y=Object(l.b)(null,{checkAuthenticated:function(){return function(){var e=Object(d.a)(h.a.mark((function e(t){var a,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!localStorage.getItem("access")){e.next=15;break}return a={headers:{"Content-Type":"application/json",Accept:"application/json"}},n=JSON.stringify({token:localStorage.getItem("access")}),e.prev=3,e.next=6,p.a.post("".concat("http://127.0.0.1:8000","/auth/jwt/verify/"),n,a);case 6:"token_not_valid"!==e.sent.data.code?t({type:g}):t({type:f}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),t({type:f});case 13:e.next=16;break;case 15:t({type:f});case 16:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t){return e.apply(this,arguments)}}()},load_user:w})((function(e){var t=e.checkAuthenticated,a=e.load_user,s=e.children;return Object(n.useEffect)((function(){t(),a()}),[]),Object(_.jsx)(r.a.Fragment,{children:s})})),C=a(97),S=a(99),k=Object(l.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated}}),{logout:function(){return function(e){e({type:v})}}})((function(e){var t=e.logout;return Object(_.jsx)(n.Fragment,{children:Object(_.jsxs)(C.a,{bg:"dark",variant:"dark",children:[Object(_.jsx)(C.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(_.jsx)(C.a.Collapse,{id:"basic-navbar-nav",children:Object(_.jsx)(S.a,{className:"mr-auto",children:Object(_.jsx)(S.a.Link,{href:"",onClick:function(){t()},children:"Logout"})})})]})})})),A=Object(l.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated}}),{})((function(e){return e.isAuthenticated?Object(_.jsxs)(r.a.Fragment,{children:[Object(_.jsx)(k,{}),Object(_.jsx)("h1",{children:"Home"})]}):Object(_.jsx)(o.a,{to:"/login"})})),L=a(28),T=a(8),F=a(56),I=a(94),P=a(98),N=a(95),E=Object(l.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated}}),{login:function(e,t){return function(){var a=Object(d.a)(h.a.mark((function a(n){var r,s,c;return h.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r={headers:{"Content-Type":"application/json"}},s=JSON.stringify({email:e,password:t}),a.prev=2,a.next=5,p.a.post("".concat("http://127.0.0.1:8000","/auth/jwt/create/"),s,r);case 5:c=a.sent,n({type:b,payload:c.data}),n(w()),a.next=13;break;case 10:a.prev=10,a.t0=a.catch(2),n({type:m});case 13:case"end":return a.stop()}}),a,null,[[2,10]])})));return function(e){return a.apply(this,arguments)}}()}})((function(e){var t=e.login,a=e.isAuthenticated,r=Object(n.useState)({email:"",password:""}),s=Object(F.a)(r,2),c=s[0],l=s[1],u=c.email,h=c.password,d=function(e){return l(Object(T.a)(Object(T.a)({},c),{},Object(L.a)({},e.target.name,e.target.value)))};return a?Object(_.jsx)(o.a,{to:"/"}):Object(_.jsx)(I.a,{className:"mt-4",children:Object(_.jsxs)(P.a,{onSubmit:function(e){return function(e){e.preventDefault(),t(u,h)}(e)},children:["Log in",Object(_.jsxs)(P.a.Group,{children:[Object(_.jsx)(P.a.Label,{children:"Email"}),Object(_.jsx)(P.a.Control,{type:"email",name:"email",id:"email",value:u,onChange:function(e){return d(e)},required:!0})]}),Object(_.jsxs)(P.a.Group,{children:[Object(_.jsx)(P.a.Label,{children:"Password"}),Object(_.jsx)(P.a.Control,{type:"password",name:"password",id:"password",value:h,onChange:function(e){return d(e)},required:!0})]}),Object(_.jsxs)(P.a.Group,{children:[Object(_.jsx)(P.a.Check,{type:"checkbox",id:"terms",label:"Accept terms & agreements."}),Object(_.jsx)(i.b,{to:"/",children:"Read here"}),"."]}),Object(_.jsx)(N.a,{variant:"primary",type:"submit",children:"Log in"}),Object(_.jsxs)("p",{children:["Forgot password? Click ",Object(_.jsx)(i.b,{to:"/reset_password",children:"here"}),"."]}),Object(_.jsxs)("p",{children:["Don't have an account? ",Object(_.jsx)(i.b,{to:"/signup",children:"Sign Up"}),"."]})]})})})),q=a(52),G=a(53),D=a(23),R=a(58),U=a(57),J=a(96),H=p.a.create({baseURL:"http://127.0.0.1:8000/",timeout:5e3,headers:{Authorization:localStorage.getItem("access_token")?"JWT "+localStorage.getItem("access_token"):null,"Content-Type":"application/json",accept:"application/json"}}),W=function(e){Object(R.a)(a,e);var t=Object(U.a)(a);function a(){var e;return Object(q.a)(this,a),(e=t.call(this)).state={input:{email:"",phone_number:"",first_name:"",last_name:"",password:"",re_password:""},errors:{}},e.handleChange=e.handleChange.bind(Object(D.a)(e)),e.handlePhoneField=e.handlePhoneField.bind(Object(D.a)(e)),e.handleSubmit=e.handleSubmit.bind(Object(D.a)(e)),e}return Object(G.a)(a,[{key:"handleChange",value:function(e){var t=this.state.input;t[e.target.name]=e.target.value,this.setState({input:t})}},{key:"handlePhoneField",value:function(e){var t=this.state.input;t[e.target.name]=e.target.value;(""===e.target.value||/^[0-9\b]+$/.test(e.target.value))&&this.setState({input:t})}},{key:"validate",value:function(){var e=this.state.input,t={},a=!0;if(e.email){/^(([^<>()[\]\.,;:\s@\"]+(\.[^<>()[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i.test(String(e.email.toLowerCase()))||(t.email="Email is not valid.",a=!1)}else t.email="Email is required.",a=!1;if(e.phone_number){/^(9)\d{9}$/.test(e.phone_number)||(t.phone_number="Phone number not valid.",a=!1)}else t.phone_number="Phone number is required.",a=!1;return e.first_name||(t.first_name="First name is required.",a=!1),e.last_name||(t.last_name="Last name is required.",a=!1),e.password||(t.password="Password is required.",a=!1),e.re_password||(t.re_password="Confirm password.",a=!1),e.password!==e.re_password&&(t.re_password="Passwords don't match.",a=!1),this.setState({errors:t}),a}},{key:"handleSubmit",value:function(e){if(e.preventDefault(),this.validate()){console.log(this.state.input);var t="+63"+this.state.input.phone_number;H.post("users/",{email:this.state.input.email,phone_number:t,first_name:this.state.input.first_name,last_name:this.state.input.last_name,password:this.state.input.password,re_password:this.state.input.re_password}).then((function(e){console.log(e),console.log(e.data)}))}}},{key:"render",value:function(){return Object(_.jsx)(I.a,{className:"mt-4",children:Object(_.jsxs)(P.a,{children:[Object(_.jsx)("h3",{children:"Sign up"}),Object(_.jsxs)(P.a.Group,{children:[Object(_.jsx)(P.a.Label,{children:"Email"}),Object(_.jsx)(P.a.Control,{required:!0,type:"email",id:"email",name:"email",value:this.state.input.email,onChange:this.handleChange,placeholder:"Email"}),Object(_.jsx)(P.a.Text,{className:"text-danger",children:this.state.errors.email})]}),Object(_.jsxs)(P.a.Group,{children:[Object(_.jsx)(P.a.Label,{children:"Phone"}),Object(_.jsxs)(J.a,{children:[Object(_.jsx)(J.a.Prepend,{children:Object(_.jsx)(J.a.Text,{children:"+63"})}),Object(_.jsx)(P.a.Control,{required:!0,maxLength:"10",id:"phone_number",name:"phone_number",value:this.state.input.phone_number,onChange:this.handlePhoneField,type:"text",placeholder:"Phone"})]}),Object(_.jsx)(P.a.Text,{className:"text-danger",children:this.state.errors.phone_number})]}),Object(_.jsxs)(P.a.Group,{children:[Object(_.jsx)(P.a.Label,{children:"First Name"}),Object(_.jsx)(P.a.Control,{required:!0,type:"text",id:"first_name",name:"first_name",value:this.state.input.first_name,onChange:this.handleChange,placeholder:"First Name"}),Object(_.jsx)(P.a.Text,{className:"text-danger",children:this.state.errors.first_name})]}),Object(_.jsxs)(P.a.Group,{children:[Object(_.jsx)(P.a.Label,{children:"Last Name"}),Object(_.jsx)(P.a.Control,{required:!0,type:"text",id:"last_name",name:"last_name",value:this.state.input.last_name,onChange:this.handleChange,placeholder:"Last Name"}),Object(_.jsx)(P.a.Text,{className:"text-danger",children:this.state.errors.last_name})]}),Object(_.jsxs)(P.a.Group,{children:[Object(_.jsx)(P.a.Label,{children:"Password"}),Object(_.jsx)(P.a.Control,{required:!0,type:"password",id:"password",name:"password",value:this.state.input.password,onChange:this.handleChange,placeholder:"Password"}),Object(_.jsx)(P.a.Text,{className:"text-danger",children:this.state.errors.password})]}),Object(_.jsxs)(P.a.Group,{children:[Object(_.jsx)(P.a.Label,{children:"Re-type Password"}),Object(_.jsx)(P.a.Control,{required:!0,type:"password",id:"re_password",name:"re_password",value:this.state.input.re_password,onChange:this.handleChange,placeholder:"Re-type Password"}),Object(_.jsx)(P.a.Text,{className:"text-danger",children:this.state.errors.re_password})]}),Object(_.jsxs)(P.a.Group,{children:[Object(_.jsx)(P.a.Check,{type:"checkbox",id:"terms",label:"Accept terms & agreements."}),Object(_.jsx)(i.b,{to:"/",children:"Read here"}),"."]}),Object(_.jsx)(N.a,{variant:"primary",type:"submit",onClick:this.handleSubmit,children:"Sign up"}),Object(_.jsxs)("p",{children:["Already have an account? ",Object(_.jsx)(i.b,{to:"/login",children:"Login"})]})]})})}}]),a}(r.a.Component);var $=function(){return Object(_.jsx)(_.Fragment,{children:"Activate"})};var z=function(){return Object(_.jsx)(_.Fragment,{children:"Reset Password"})};var B=function(){return Object(_.jsx)(_.Fragment,{children:"Reset Password Confirm"})},M=a(17),K=a(54),Q=a(55),V={access:localStorage.getItem("access"),refresh:localStorage.getItem("refresh"),isAuthenticated:null,user:null},X=Object(M.combineReducers)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case g:return Object(T.a)(Object(T.a)({},e),{},{isAuthenticated:!0});case f:return Object(T.a)(Object(T.a)({},e),{},{isAuthenticated:!1});case b:return localStorage.setItem("access",n.access),Object(T.a)(Object(T.a)({},e),{},{isAuthenticated:!0,access:n.access,refresh:n.refresh});case O:return Object(T.a)(Object(T.a)({},e),{},{user:n});case x:return Object(T.a)(Object(T.a)({},e),{},{user:null});case m:case v:return localStorage.removeItem("access"),localStorage.removeItem("refresh"),Object(T.a)(Object(T.a)({},e),{},{isAuthenticated:!1,access:null,refresh:null,user:null});default:return e}}}),Y=[Q.a],Z=Object(M.createStore)(X,{},Object(K.composeWithDevTools)(M.applyMiddleware.apply(void 0,Y)));var ee=function(){return Object(_.jsx)(l.a,{store:Z,children:Object(_.jsx)(r.a.Fragment,{children:Object(_.jsx)(i.a,{children:Object(_.jsx)(y,{children:Object(_.jsxs)(o.d,{children:[Object(_.jsx)(o.b,{exact:!0,path:"/",component:A}),Object(_.jsx)(o.b,{path:"/login",component:E}),Object(_.jsx)(o.b,{path:"/signup",component:W}),Object(_.jsx)(o.b,{path:"/activate/:uid/:token",component:$}),Object(_.jsx)(o.b,{path:"/reset_password",component:z}),Object(_.jsx)(o.b,{path:"/password/reset/confirm/:uid/:token",component:B})]})})})})})},te=(a(91),function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,100)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,s=t.getLCP,c=t.getTTFB;a(e),n(e),r(e),s(e),c(e)}))});c.a.render(Object(_.jsx)(r.a.StrictMode,{children:Object(_.jsx)(ee,{})}),document.getElementById("root")),te()}},[[92,1,2]]]);
//# sourceMappingURL=main.5dc9a774.chunk.js.map