(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{55:function(e,t,a){},82:function(e,t,a){},83:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(20),c=a.n(r),i=(a(54),a(55),a(14)),o=a(6),l=a(1);var h=function(){return Object(l.jsx)(s.a.Fragment,{children:Object(l.jsx)("h1",{children:"Home"})})},d=a(22),u=a(10),p=a(46),j=a(84),b=a(86),m=a(87),O=a(23),x=a(19),g=a.n(x),f=a(28),v=a(18),w=a.n(v),_="LOGIN_SUCCES",C="LOGIN_FAIL",y="USER_LOADED_SUCCESS",S="USER_LOADED_FAIL;",L=Object(O.b)(null,{login:function(e,t){return function(){var a=Object(f.a)(g.a.mark((function a(n){var s,r,c;return g.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return s={headers:{"Content-Type":"application/json"}},r=JSON.stringify({email:e,password:t}),a.prev=2,a.next=5,w.a.post("".concat("http://127.0.0.1:8000","/auth/jwt/create/"),r,s);case 5:c=a.sent,n({type:_,payload:c.data}),n(function(){var e=Object(f.a)(g.a.mark((function e(t){var a,n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!localStorage.getItem("access")){e.next=14;break}return a={headers:{"Content-Type":"application/json",Authorization:"JWT ".concat(localStorage.getItem("access")),Accept:"application/json"}},e.prev=2,e.next=5,w.a.get("".concat("http://127.0.0.1:8000","/auth/users/me/"),a);case 5:n=e.sent,t({type:y,payload:n.data}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),t({type:S});case 12:e.next=15;break;case 14:t({type:S});case 15:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}()),a.next=13;break;case 10:a.prev=10,a.t0=a.catch(2),n({type:C});case 13:case"end":return a.stop()}}),a,null,[[2,10]])})));return function(e){return a.apply(this,arguments)}}()}})((function(e){var t=e.login,a=Object(n.useState)({email:"",password:""}),s=Object(p.a)(a,2),r=s[0],c=s[1],o=r.email,h=r.password,O=function(e){return c(Object(u.a)(Object(u.a)({},r),{},Object(d.a)({},e.target.name,e.target.value)))};return Object(l.jsx)(j.a,{className:"mt-4",children:Object(l.jsxs)(b.a,{onSubmit:function(e){return function(e){e.preventDefault(),t(o,h)}(e)},children:["Log in",Object(l.jsxs)(b.a.Group,{children:[Object(l.jsx)(b.a.Label,{children:"Email"}),Object(l.jsx)(b.a.Control,{type:"email",name:"email",id:"email",value:o,onChange:function(e){return O(e)},required:!0})]}),Object(l.jsxs)(b.a.Group,{children:[Object(l.jsx)(b.a.Label,{children:"Password"}),Object(l.jsx)(b.a.Control,{type:"password",name:"password",id:"password",value:h,onChange:function(e){return O(e)},required:!0})]}),Object(l.jsx)(m.a,{variant:"primary",type:"submit",children:"Log in"}),Object(l.jsxs)("p",{children:["Forgot password? Click ",Object(l.jsx)(i.b,{to:"/reset_password",children:"here"}),"."]}),Object(l.jsxs)("p",{children:["Don't have an account? ",Object(l.jsx)(i.b,{to:"/signup",children:"Sign Up"}),"."]})]})})})),P=a(42),k=a(43),F=a(15),I=a(48),N=a(47),T=a(85),q=w.a.create({baseURL:"http://127.0.0.1:8000/",timeout:5e3,headers:{Authorization:localStorage.getItem("access_token")?"JWT "+localStorage.getItem("access_token"):null,"Content-Type":"application/json",accept:"application/json"}}),A=function(e){Object(I.a)(a,e);var t=Object(N.a)(a);function a(){var e;return Object(P.a)(this,a),(e=t.call(this)).state={input:{email:"",phone_number:"",first_name:"",last_name:"",password:"",re_password:""},errors:{}},e.handleChange=e.handleChange.bind(Object(F.a)(e)),e.handlePhoneField=e.handlePhoneField.bind(Object(F.a)(e)),e.handleSubmit=e.handleSubmit.bind(Object(F.a)(e)),e}return Object(k.a)(a,[{key:"handleChange",value:function(e){var t=this.state.input;t[e.target.name]=e.target.value,this.setState({input:t})}},{key:"handlePhoneField",value:function(e){var t=this.state.input;t[e.target.name]=e.target.value;(""===e.target.value||/^[0-9\b]+$/.test(e.target.value))&&this.setState({input:t})}},{key:"validate",value:function(){var e=this.state.input,t={},a=!0;if(e.email){/^(([^<>()[\]\.,;:\s@\"]+(\.[^<>()[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i.test(String(e.email.toLowerCase()))||(t.email="Email is not valid.",a=!1)}else t.email="Email is required.",a=!1;if(e.phone_number){/^(9)\d{9}$/.test(e.phone_number)||(t.phone_number="Phone number not valid.",a=!1)}else t.phone_number="Phone number is required.",a=!1;return e.first_name||(t.first_name="First name is required.",a=!1),e.last_name||(t.last_name="Last name is required.",a=!1),e.password||(t.password="Password is required.",a=!1),e.re_password||(t.re_password="Confirm password.",a=!1),e.password!==e.re_password&&(t.re_password="Passwords don't match.",a=!1),this.setState({errors:t}),a}},{key:"handleSubmit",value:function(e){if(e.preventDefault(),this.validate()){console.log(this.state.input);var t="+63"+this.state.input.phone_number;q.post("users/",{email:this.state.input.email,phone_number:t,first_name:this.state.input.first_name,last_name:this.state.input.last_name,password:this.state.input.password,re_password:this.state.input.re_password}).then((function(e){console.log(e),console.log(e.data)}))}}},{key:"render",value:function(){return Object(l.jsx)(j.a,{className:"mt-4",children:Object(l.jsxs)(b.a,{children:[Object(l.jsx)("h3",{children:"Sign up"}),Object(l.jsxs)(b.a.Group,{children:[Object(l.jsx)(b.a.Label,{children:"Email"}),Object(l.jsx)(b.a.Control,{required:!0,type:"email",id:"email",name:"email",value:this.state.input.email,onChange:this.handleChange,placeholder:"Email"}),Object(l.jsx)(b.a.Text,{className:"text-danger",children:this.state.errors.email})]}),Object(l.jsxs)(b.a.Group,{children:[Object(l.jsx)(b.a.Label,{children:"Phone"}),Object(l.jsxs)(T.a,{children:[Object(l.jsx)(T.a.Prepend,{children:Object(l.jsx)(T.a.Text,{children:"+63"})}),Object(l.jsx)(b.a.Control,{required:!0,maxLength:"10",id:"phone_number",name:"phone_number",value:this.state.input.phone_number,onChange:this.handlePhoneField,type:"text",placeholder:"Phone"})]}),Object(l.jsx)(b.a.Text,{className:"text-danger",children:this.state.errors.phone_number})]}),Object(l.jsxs)(b.a.Group,{children:[Object(l.jsx)(b.a.Label,{children:"First Name"}),Object(l.jsx)(b.a.Control,{required:!0,type:"text",id:"first_name",name:"first_name",value:this.state.input.first_name,onChange:this.handleChange,placeholder:"First Name"}),Object(l.jsx)(b.a.Text,{className:"text-danger",children:this.state.errors.first_name})]}),Object(l.jsxs)(b.a.Group,{children:[Object(l.jsx)(b.a.Label,{children:"Last Name"}),Object(l.jsx)(b.a.Control,{required:!0,type:"text",id:"last_name",name:"last_name",value:this.state.input.last_name,onChange:this.handleChange,placeholder:"Last Name"}),Object(l.jsx)(b.a.Text,{className:"text-danger",children:this.state.errors.last_name})]}),Object(l.jsxs)(b.a.Group,{children:[Object(l.jsx)(b.a.Label,{children:"Password"}),Object(l.jsx)(b.a.Control,{required:!0,type:"password",id:"password",name:"password",value:this.state.input.password,onChange:this.handleChange,placeholder:"Password"}),Object(l.jsx)(b.a.Text,{className:"text-danger",children:this.state.errors.password})]}),Object(l.jsxs)(b.a.Group,{children:[Object(l.jsx)(b.a.Label,{children:"Re-type Password"}),Object(l.jsx)(b.a.Control,{required:!0,type:"password",id:"re_password",name:"re_password",value:this.state.input.re_password,onChange:this.handleChange,placeholder:"Re-type Password"}),Object(l.jsx)(b.a.Text,{className:"text-danger",children:this.state.errors.re_password})]}),Object(l.jsx)(m.a,{variant:"primary",type:"submit",onClick:this.handleSubmit,children:"Sign up"}),Object(l.jsxs)("p",{children:["Already have an account? ",Object(l.jsx)(i.b,{to:"/login",children:"Login"})]})]})})}}]),a}(s.a.Component);var E=function(){return Object(l.jsx)(l.Fragment,{children:"Activate"})};var G=function(){return Object(l.jsx)(l.Fragment,{children:"Reset Password"})};var D=function(){return Object(l.jsx)(l.Fragment,{children:"Reset Password Confirm"})},R=a(13),U=a(44),J=a(45),W={access:localStorage.getItem("access"),refresh:localStorage.getItem("refresh"),isAuthenticated:null,user:null},$=Object(R.combineReducers)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case _:return localStorage.setItem("access",n.access),Object(u.a)(Object(u.a)({},e),{},{isAuthenticated:!0,access:n.access,refresh:n.refresh});case y:return Object(u.a)(Object(u.a)({},e),{},{user:n});case S:return Object(u.a)(Object(u.a)({},e),{},{user:null});case C:return localStorage.removeItem("access"),localStorage.removeItem("refresh"),Object(u.a)(Object(u.a)({},e),{},{isAuthenticated:!1,access:null,refresh:null,user:null});default:return e}}}),z=[J.a],B=Object(R.createStore)($,{},Object(U.composeWithDevTools)(R.applyMiddleware.apply(void 0,z)));var M=function(){return Object(l.jsx)(O.a,{store:B,children:Object(l.jsx)(s.a.Fragment,{children:Object(l.jsx)(i.a,{children:Object(l.jsxs)(o.c,{children:[Object(l.jsx)(o.a,{exact:!0,path:"/",component:h}),Object(l.jsx)(o.a,{path:"/login",component:L}),Object(l.jsx)(o.a,{path:"/signup",component:A}),Object(l.jsx)(o.a,{path:"/activate/:uid/:token",component:E}),Object(l.jsx)(o.a,{path:"/reset_password",component:G}),Object(l.jsx)(o.a,{path:"/password/reset/confirm/:uid/:token",component:D})]})})})})},H=(a(82),function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,88)).then((function(t){var a=t.getCLS,n=t.getFID,s=t.getFCP,r=t.getLCP,c=t.getTTFB;a(e),n(e),s(e),r(e),c(e)}))});c.a.render(Object(l.jsx)(s.a.StrictMode,{children:Object(l.jsx)(M,{})}),document.getElementById("root")),H()}},[[83,1,2]]]);
//# sourceMappingURL=main.ee02b353.chunk.js.map